<!DOCTYPE html>
<html>
<head>
  <title>Item</title>
  <!-- <link rel="stylesheet" href="/css/styles.css"> -->
  <!-- for tailwind -->
  <link rel="stylesheet" href="/css/output.css">
  <style>
    .gradient {
      background: linear-gradient(90deg, #316fe4 0%, #243fb9 100%);
    }
  </style>
</head>
<body class="gradient sm:container mx-auto">
  <div>
    <%- include('./partials/navbar') %>
    <div class="max-w-lg mx-auto">
      <div class="flex flex-col items-center mt-16">
        <div class="-m-1.5 overflow-x-auto">
        <div class="p-1.5 inline-block align-middle">
          <div class="overflow-hidden">
            <table class=" divide-y divide-white">
              <caption class="py-2 text-start text-sm text-white">List of medications</caption>
              <thead>
                <tr>
                  <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-white uppercase">Name</th>
                  <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-white uppercase">Maximum Safe Dosage (msd)</th>
                  <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-white uppercase">Msd (Children)</th>
                  <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-white uppercase">Concentration</th>
                  <th scope="col" class="px-6 py-3 text-end text-xs font-medium text-white uppercase">Action</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-white">
                <% medications.forEach((la) => { %>
                  <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-black"><%= la.name %></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-black"><%= la.msd %></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-black"><%= la.msd_for_children %></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-black"><%= la.concentration %></td>
                    <td class="px-6 py-4 whitespace-nowrap text-end text-sm font-medium">
                      <button onclick="editMedication('<%= la.id %>', '<%= la.name %>', '<%= la.msd %>', '<%= la.concentration %>')" 
                        class="pr-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent text-blue-600 hover:text-blue-800 
                        disabled:opacity-50 disabled:pointer-events-none dark:text-blue-500 dark:hover:text-blue-400 dark:focus:outline-none 
                        dark:focus:ring-1 dark:focus:ring-gray-600">Edit</button>
                      <button onclick="deleteMedication('<%= la.id %>')" class="inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border 
                        border-transparent text-blue-600 hover:text-blue-800 disabled:opacity-50 disabled:pointer-events-none dark:text-blue-500
                         dark:hover:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600">Delete</button>
                    </td>
                  </tr>
                <% }); %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    <form id="addMedication" action="/add" method="POST" hidden class="pt-10">
      <input type="text" name="name" placeholder="Name" id="la-name" required class="m-2">
      <input type="number" step="0.01" name="msd" placeholder="Maximum safe dosage(mg)" id="msd" required class="m-2">
      <input type="number" step="0.01" name="msd_for_children" placeholder="Msd for children" id="msd_for_children"required class="m-2">
      <input type="number" step="0.01" name="concentration" placeholder="Concentration(%)" id="concentration" required class="m-2">
      <div class="pt-3">
        <button type="submit" class="py-3 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-100 
          text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 dark:text-blue-400 dark:focus:outline-none 
          dark:focus:ring-1 dark:focus:ring-gray-600">
          Add Anaesthetic
        </button>
      </div>
    </form>
    
    <!-- <button onclick="showForm()" id="newAnaestheticButton">Add Anaesthetic</button> -->
    <div class="pt-10">
      <button onclick="showForm()" id="newAnaestheticButton" class="py-3 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent 
      bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:hover:bg-blue-900 
      dark:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600">
      Add Anaesthetic
      </button>
    </div>
</div>      
</div>

<%- include('./partials/footer') %> 

    <script src="/js/script.js"></script>
    <!-- <script src="/node_modules/preline/dist/preline.js"></script> -->
</body>
</html>